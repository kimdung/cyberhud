<!DOCTYPE html>

<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->

<html>
<head>
    <title>Tuỳ biến CyberHud</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
     <style>
        body {
            font-family: Arial, sans-serif;
            margin: 10;
            padding: 0;
            background-color: #f0f0f0;
        }
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <div class="topnav">
        <h1>Tuỳ biến CyberHud</h1>
    </div>
    <div class="content">
        <p>
            <button id="connectBleButton" class="connectButton"> Kết nối CyberHud (ấn vào đây) </button>
        </p>
        <p class="gray-label">Trạng thái kết nối: <strong><span id="bleState" style="color:#d13a30;">Không kết nối</span></strong></p>
   
    </div>
    
    <div id="configBlock" style="display: none;">
    <p>
        <p>
            Sửa giá trị trong bảng dưới rồi ấn <b>Gửi</b>
        </p>
        <table>
            <tr>
                <td>Xoay màn hình</td>
                <td>
                    <select id="display_rotation" onchange="updateConfig()">
                        <option value="1">1 (cổng sạc bên phải)</option>
                        <option value="3">3 (cổng sạc bên trái)</option>
                        <option value="5">5 (ảnh ngược, cổng sạc bên phải)</option>
                        <option value="7">7 (ảnh ngược, cổng sạc bên trái)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Kiểu màn hình</td>
                <td>
                    <select id="screen" onchange="updateConfig()">
                        <option value="0">Biển tốc độ giới hạn ở giữa</option>
                        <option value="1">Tốc độ hiện tại ở giữa</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Upload ảnh màn hình khởi động (1) </td>
                <td>
                    <button id="transfer-file-button">Upload</button>
                    <div id="file-transfer-percent" style="display: none;">0%</div>
                </td>
            </tr>
            <tr>
                <td>Thời gian hiện ảnh màn hình khởi động (2) </td>
                <td>
                    <input type="number" id="boot_screen_duration" min="0" max="255" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng LED cảnh báo</td>
                <td>
                    <input type="range" id="led_brightness" min="0" max="9" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng màn hình khi trời tối</td>
                <td>
                    <input type="range" id="night_brightness" min="0" max="9" oninput="updateConfig()">
                </td>
            </tr>

            
            <tr>
                <td>Cảnh báo tốc độ trễ (3) </td>
                <td>
                    <input type="number" id="speed_limit_offset" min="0" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Trạng thái màn hình khi không có kết nối </td>
                <td>
                    <select id="sleep_screen_mode" onchange="updateConfig()">
                        <option value="0">0 (Tắt màn hình)</option>
                        <option value="1">1 (Bật dasai mochi)</option>
                        <option value="2">2 (Hiện ảnh)</option>
                    </select>
                </td>
            </tr>

            <tr>
                <td>Hiện biển báo mờ mờ khi không có biển báo </td>
                <td>
                    <select id="show_image_holder" onchange="updateConfig()">
                        <option value="1">Có hiện</option>
                        <option value="0">Không hiện</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Kêu bip khi tốc độ giới hạn thay đổi </td>
                <td>
                    <select id="beep_limit_change" onchange="updateConfig()">
                        <option value="1">1 (Kêu)</option>
                        <option value="0">0 (Ko kêu)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Thời gian (số giây) giữa các lần bip bip</td>
                <td>
                    <input type="number" id="pause_between_beep" min="1" max="100" oninput="updateConfig()">
                </td>
            </tr>
        </table>
        <p>
            <i>
                1) Ảnh jpeg 320x240, nhở hơn 100KB. CyberHud tự khởi động lại khi up thành công <br>
                2) Thời gian đơn vị giây. Tối đa 255 giây. 0 giây tức là không hiện. <br>
                3) Cảnh báo tốc độ trễ ví dụ tốc độ giới hạn là 50km/h, muốn đi vượt quá 53km/h mới cảnh báo thì nhập 3 <br>
            </i>
        </p>
        <p>          
        </p>
        <table>
            <tr>
                <td>Kết nối đầu đọc obd vgate icar pro 4.0 <br>Chỉ bật khi có đầu đọc</td>
                <td>
                    <select id="obd_scan_duration" onchange="updateConfig()">
                        <option value="0">0 (Tắt)</option>
                        <option value="5">5 (Bật scan 5s)</option>                
                        <option value="10">10 (Bật scan 10s)</option>                
                    </select>
                </td>
            </tr>
          <!--  <tr style="display: none;>
                <td>Tự ngủ sau khi có kết nối (giây) </td>
                <td>
                    <input type="number" id="awake_duration" min="0" onchange="updateConfig()">
                </td>
            </tr>
            <tr style="display: none;>
                <td>Thời gian ngủ (giây) </td>
                <td>
                    <input type="number" id="sleep_duration" min="0" onchange="updateConfig()">
                </td>
            </tr> -->
        </table>    
        
        <p>
            <button id="sendButton" onclick="send()">Gửi</button> <strong><span id="sendState" style="color:#24af37;"></span></strong>
        </p>
        <p>
            <input type="text" size="140"  id="configOutput" readonly style="display: none;">
        </p>
        
    </p>
</div>
</body>

<script>

 const _0x20ad04=_0x1de0;(function(_0x76169d,_0x3e1eb2){const _0x5c7930=_0x1de0,_0x55dd04=_0x76169d();while(!![]){try{const _0x50a5ed=-parseInt(_0x5c7930(0x14c))/0x1*(parseInt(_0x5c7930(0x117))/0x2)+-parseInt(_0x5c7930(0x164))/0x3*(-parseInt(_0x5c7930(0x138))/0x4)+parseInt(_0x5c7930(0x11c))/0x5*(-parseInt(_0x5c7930(0x157))/0x6)+-parseInt(_0x5c7930(0x144))/0x7+-parseInt(_0x5c7930(0x127))/0x8+-parseInt(_0x5c7930(0x125))/0x9+parseInt(_0x5c7930(0x12f))/0xa*(parseInt(_0x5c7930(0x163))/0xb);if(_0x50a5ed===_0x3e1eb2)break;else _0x55dd04['push'](_0x55dd04['shift']());}catch(_0x2011db){_0x55dd04['push'](_0x55dd04['shift']());}}}(_0x4c05,0xa05ba));const connectButton=document[_0x20ad04(0x167)]('connectBleButton'),transferFileButton=document[_0x20ad04(0x167)](_0x20ad04(0x132)),bleStateContainer=document[_0x20ad04(0x167)](_0x20ad04(0x13b)),percent=document['getElementById'](_0x20ad04(0xfe)),sendButton=document[_0x20ad04(0x167)](_0x20ad04(0x110)),brightnessSlider=document[_0x20ad04(0x167)](_0x20ad04(0xf6)),brightnessValue=document[_0x20ad04(0x167)]('brightness_value'),configBlock=document[_0x20ad04(0x167)]('configBlock'),configOutput=document[_0x20ad04(0x167)](_0x20ad04(0x154)),DEVICE_NAME='VIETMAP_HUD',SERVICE_UUID=_0x20ad04(0x152),WRITE_CHAR_UUID=_0x20ad04(0x123),NOTIF_CHAR_UUID='0000fff1-0000-1000-8000-00805f9b34fb',FILE_BLOCK_UUID=_0x20ad04(0x147),DEVICE_INFO_SERVICE_UUID=_0x20ad04(0x109),FIRMWARE_CHARACTERISTIC_UUID=_0x20ad04(0x12c);var bleServer,fileBlockCharacteristic,defaultConfig='BKHN;display_rotation=3;show_clock=1;led_brightness=9;speed_limit_offset=0'+_0x20ad04(0x14a)+_0x20ad04(0x153)+_0x20ad04(0xf8)+';show_image_holder=1'+_0x20ad04(0xf9)+_0x20ad04(0x129)+';screen=1'+_0x20ad04(0x151)+_0x20ad04(0x105);!navigator[_0x20ad04(0x115)]&&(console[_0x20ad04(0x103)](_0x20ad04(0x148)),bleStateContainer['innerHTML']=_0x20ad04(0x149)+_0x20ad04(0x11b)+_0x20ad04(0x15e)+'Hoặc\x20thử\x20cài\x20ứng\x20dụng\x20<a\x20href=\x22https://apps.apple.com/us/app/bluefy-web-ble-browser/id1492822055\x22>Bluefy</a>\x20trên\x20iPhone\x20và\x20dùng\x20nó\x20để\x20mở\x20lại\x20trang\x20này.',connectButton[_0x20ad04(0x104)][_0x20ad04(0x12d)]=_0x20ad04(0x143));connectButton[_0x20ad04(0x162)](_0x20ad04(0x10e),_0x5671a8=>{const _0x2f4681=_0x20ad04;connect(),transferFileButton[_0x2f4681(0x162)](_0x2f4681(0x10e),function(_0x4556d8){const _0xc657c4=_0x2f4681;let _0x29ff19=document[_0xc657c4(0x166)](_0xc657c4(0x122));_0x29ff19[_0xc657c4(0x11a)]=_0xc657c4(0x10b),_0x29ff19[_0xc657c4(0x100)]=_0xc657c4(0x114),_0x29ff19[_0xc657c4(0x120)]=_0x4da82f=>{const _0x386a3b=_0xc657c4;let _0x40bf5a=Array[_0x386a3b(0x130)](_0x29ff19['files']),_0x552dcc=_0x40bf5a[0x0],_0x2639cf=new FileReader();_0x2639cf['onload']=function(_0x49b191){const _0x418c4c=_0x386a3b;let _0x307b86=_0x49b191['target'][_0x418c4c(0x107)],_0x13b0cb=new Uint8Array(_0x307b86);transferFile(_0x307b86);},_0x2639cf['readAsArrayBuffer'](_0x552dcc);},_0x29ff19['click']();});});function onDisconnected(_0x4e703c){const _0x378fab=_0x20ad04;bleStateContainer[_0x378fab(0x113)]=_0x378fab(0x137),bleStateContainer[_0x378fab(0x104)][_0x378fab(0x136)]=_0x378fab(0x159),configBlock[_0x378fab(0x104)][_0x378fab(0x12d)]=_0x378fab(0x143),connectButton[_0x378fab(0x104)]['display']='block';}async function connect(){const _0x58056d=_0x20ad04;console[_0x58056d(0x103)](_0x58056d(0x13f));const _0x1d541c=await navigator[_0x58056d(0x115)][_0x58056d(0x13d)]({'filters':[{'name':DEVICE_NAME}],'optionalServices':[SERVICE_UUID,DEVICE_INFO_SERVICE_UUID]});_0x1d541c[_0x58056d(0x162)](_0x58056d(0x11f),onDisconnected),console[_0x58056d(0x103)](_0x58056d(0x101),_0x1d541c[_0x58056d(0x145)]),bleStateContainer[_0x58056d(0x113)]='Đang\x20kết\x20nối\x20với\x20CyberHud\x20',bleStateContainer[_0x58056d(0x104)][_0x58056d(0x136)]=_0x58056d(0x11d),console[_0x58056d(0x103)](_0x58056d(0xfa)),bleServer=await _0x1d541c[_0x58056d(0x126)][_0x58056d(0x11e)](),console['log'](_0x58056d(0x112));const _0x3721cf=await bleServer[_0x58056d(0x169)](DEVICE_INFO_SERVICE_UUID);console['log'](_0x58056d(0x118));const _0x2085ac=await _0x3721cf[_0x58056d(0x102)](FIRMWARE_CHARACTERISTIC_UUID);console[_0x58056d(0x103)]('Try\x20to\x20read\x20revision\x20value');const _0x39ce46=await _0x2085ac[_0x58056d(0x139)]();console[_0x58056d(0x103)]('Read\x20value:\x20',_0x39ce46);const _0x4ba440=new TextDecoder()[_0x58056d(0xff)](_0x39ce46);bleStateContainer[_0x58056d(0x104)][_0x58056d(0x136)]=_0x58056d(0x141),bleStateContainer[_0x58056d(0x113)]=_0x58056d(0x165)+_0x4ba440,configBlock[_0x58056d(0x104)][_0x58056d(0x12d)]='block',console[_0x58056d(0x103)](_0x58056d(0x15d),_0x4ba440),parseData(),loadCurrentConfig(),connectButton['style'][_0x58056d(0x12d)]=_0x58056d(0x143);}async function loadCurrentConfig(){const _0x13cfc5=_0x20ad04,_0x36a8e1=await bleServer[_0x13cfc5(0x169)](SERVICE_UUID),_0x10edcf=await _0x36a8e1[_0x13cfc5(0x102)](NOTIF_CHAR_UUID);try{await _0x10edcf['stopNotifications']();}catch(_0x5b62d9){}_0x10edcf['addEventListener'](_0x13cfc5(0x155),handleCharacteristicChange),await _0x10edcf[_0x13cfc5(0x15f)](),fileBlockCharacteristic=await _0x36a8e1[_0x13cfc5(0x102)](FILE_BLOCK_UUID);const _0x4de0af=await _0x36a8e1[_0x13cfc5(0x102)](WRITE_CHAR_UUID),_0x1e7a2f='LOAD',_0x488157=Uint8Array['from'](_0x1e7a2f[_0x13cfc5(0x133)]('')[_0x13cfc5(0x116)](_0x72e545=>_0x72e545['charCodeAt']()));_0x4de0af['writeValueWithoutResponse'](_0x488157);}function handleCharacteristicChange(_0x59454f){const _0x360df9=_0x20ad04,_0x55f5c8=new TextDecoder()[_0x360df9(0xff)](_0x59454f[_0x360df9(0x10a)]['value']);console[_0x360df9(0x103)](_0x360df9(0x135),_0x55f5c8),_0x55f5c8!=''&&(defaultConfig=_0x55f5c8,parseData());}async function send(){const _0x185a81=_0x20ad04,_0x23a782=await bleServer['getPrimaryService'](SERVICE_UUID),_0x117486=await _0x23a782[_0x185a81(0x102)](WRITE_CHAR_UUID),_0x17f03a=document[_0x185a81(0x167)](_0x185a81(0x154))[_0x185a81(0x160)],_0x82d3ff=Uint8Array[_0x185a81(0x130)](_0x17f03a[_0x185a81(0x133)]('')[_0x185a81(0x116)](_0x5e7b51=>_0x5e7b51[_0x185a81(0x14e)]()));await _0x117486[_0x185a81(0x119)](_0x82d3ff),sendState[_0x185a81(0x113)]=_0x185a81(0x142),setTimeout(()=>window[_0x185a81(0x121)][_0x185a81(0x134)](),0xbb8);}function disconnectDevice(){const _0x4361d8=_0x20ad04;console['log'](_0x4361d8(0x14b)),bleServer&&bleServer[_0x4361d8(0xf7)]?(bleServer[_0x4361d8(0x13c)](),console[_0x4361d8(0x103)](_0x4361d8(0x13e)),bleStateContainer['innerHTML']=_0x4361d8(0x137),bleStateContainer[_0x4361d8(0x104)]['color']=_0x4361d8(0x159),configBlock[_0x4361d8(0x104)]['display']=_0x4361d8(0x143)):(console[_0x4361d8(0x14f)](_0x4361d8(0x10f)),window['alert'](_0x4361d8(0xfd)));}function updateConfig(){const _0x166af9=_0x20ad04;var _0x75145c=_0x166af9(0x146)+document[_0x166af9(0x167)](_0x166af9(0x15b))[_0x166af9(0x160)]+';led_brightness='+document['getElementById'](_0x166af9(0xf6))['value']+_0x166af9(0x140)+document[_0x166af9(0x167)](_0x166af9(0x12a))[_0x166af9(0x160)]+_0x166af9(0xfb)+document[_0x166af9(0x167)](_0x166af9(0x15a))[_0x166af9(0x160)]+_0x166af9(0x161)+document[_0x166af9(0x167)]('obd_scan_duration')[_0x166af9(0x160)]+_0x166af9(0x150)+document[_0x166af9(0x167)](_0x166af9(0x168))[_0x166af9(0x160)]+_0x166af9(0x131)+document[_0x166af9(0x167)](_0x166af9(0x156))[_0x166af9(0x160)]+_0x166af9(0x12e)+document['getElementById'](_0x166af9(0x15c))[_0x166af9(0x160)]+_0x166af9(0x111)+document[_0x166af9(0x167)]('screen')[_0x166af9(0x160)]+_0x166af9(0x14d)+document[_0x166af9(0x167)](_0x166af9(0x158))[_0x166af9(0x160)]+_0x166af9(0x10c)+document['getElementById'](_0x166af9(0x128))[_0x166af9(0x160)];configOutput[_0x166af9(0x160)]=_0x75145c;}function _0x4c05(){const _0x184528=['5663259EhEUUb','name','BKHN;display_rotation=','0000fff3-0000-1000-8000-00805f9b34fb','Web\x20Bluetooth\x20API\x20is\x20not\x20available\x20in\x20this\x20browser!','Trình\x20duyệt\x20này\x20(thiết\x20bị\x20này)\x20không\x20hỗ\x20trợ!<br>\x20',';obd_scan_duration=0','Disconnect\x20Device.','362KJZPTD',';pause_between_beep=','charCodeAt','error',';show_image_holder=',';pause_between_beep=2','0000fff0-0000-1000-8000-00805f9b34fb',';night_brightness=5','configOutput','characteristicvaluechanged','beep_limit_change','1993986khbxyY','pause_between_beep','#d13a30','night_brightness','display_rotation','sleep_screen_mode','Decoded\x20value:\x20','Hoặc\x20thử\x20mở\x20trang\x20này\x20bằng\x20điện\x20thoại\x20Android.\x20<br>','startNotifications','value',';obd_scan_duration=','addEventListener','54428EvzLmt','9UmfuzJ','Đã\x20kết\x20nối\x20với\x20CyberHud\x20','createElement','getElementById','show_image_holder','getPrimaryService','led_brightness','connected',';inactive_duration=1',';beep_limit_change=0','Connecting\x20to\x20device\x20...',';night_brightness=','undefined','Chưa\x20kết\x20nối\x20với\x20thiết\x20bị\x20Bluetooth.','file-transfer-percent','decode','accept','Device\x20Selected:','getCharacteristic','log','style',';boot_screen_duration=0','block','result','led_color','0000180a-0000-1000-8000-00805f9b34fb','target','file',';boot_screen_duration=','byteLength','click','Bluetooth\x20is\x20not\x20connected.','sendButton',';screen=','Getting\x20device\x20info\x20service\x20...','innerHTML','image/jpeg','bluetooth','map','1942RpmaTG','Getting\x20firmware\x20characteristics\x20...','writeValueWithoutResponse','type','Thử\x20mở\x20trang\x20này\x20bằng\x20máy\x20tính\x20và\x20trình\x20duyệt\x20Chrome).<br>','5wquAOH','#242237','connect','gattserverdisconnected','onchange','location','input','0000fff2-0000-1000-8000-00805f9b34fb','key\x20=\x20','2659482kzURWX','gatt','7376256aLOQSv','boot_screen_duration',';sleep_screen_mode=1','speed_limit_offset','replace','00002a26-0000-1000-8000-00805f9b34fb','display',';sleep_screen_mode=','5630vrlPMp','from',';beep_limit_change=','transfer-file-button','split','reload','Current\x20config\x20value:\x20','color','Không\x20kết\x20nối','775336DihzmC','readValue','\x20value\x20=\x20','bleState','disconnect','requestDevice','Device\x20Disconnected','Initializing\x20Bluetooth...',';speed_limit_offset=','#24af37','Đã\x20gửi!\x20Reload\x20sau\x203s','none'];_0x4c05=function(){return _0x184528;};return _0x4c05();}function parseData(){const _0x4cc7e2=_0x20ad04;configOutput[_0x4cc7e2(0x160)]=defaultConfig;var _0x249b2d=configOutput['value'];_0x249b2d[_0x4cc7e2(0x133)](';')['forEach'](function(_0x45db71){const _0x593332=_0x4cc7e2;var _0x49e57a=_0x45db71[_0x593332(0x133)]('=');console[_0x593332(0x103)](_0x593332(0x124)+_0x49e57a[0x0]+_0x593332(0x13a)+_0x49e57a[0x1]);var _0x457639=document[_0x593332(0x167)](_0x49e57a[0x0]);typeof _0x457639!=_0x593332(0xfc)&&_0x457639!=null&&(_0x49e57a[0x0]==_0x593332(0x108)?_0x457639[_0x593332(0x160)]=_0x49e57a[0x1][_0x593332(0x12b)]('0x','#'):_0x457639['value']=_0x49e57a[0x1]);});}async function transferFile(_0x46d41b){const _0x54ed1f=_0x20ad04;let _0x3131a1=0x64*0x400;if(_0x46d41b[_0x54ed1f(0x10d)]>_0x3131a1){console[_0x54ed1f(0x14f)]('File\x20length\x20is\x20too\x20long:\x20'+_0x46d41b['byteLength']+'\x20bytes\x20but\x20maximum\x20is\x20'+_0x3131a1);return;}transferFileButton[_0x54ed1f(0x104)][_0x54ed1f(0x12d)]='none',sendButton['style'][_0x54ed1f(0x12d)]=_0x54ed1f(0x143),percent[_0x54ed1f(0x104)]['display']=_0x54ed1f(0x106),sendFileBlock(_0x46d41b,0x0);}function _0x1de0(_0x3f15f3,_0x441c9a){const _0x4c059f=_0x4c05();return _0x1de0=function(_0x1de009,_0x40dc44){_0x1de009=_0x1de009-0xf6;let _0x19d11d=_0x4c059f[_0x1de009];return _0x19d11d;},_0x1de0(_0x3f15f3,_0x441c9a);}const delay=_0x23c8f9=>{return new Promise(_0x402657=>setTimeout(_0x402657,_0x23c8f9));};async function sendFileBlock(_0x14b8ec,_0x20fd35){const _0x25ae0e=_0x20ad04;await delay(0x64);let _0x80428e=_0x14b8ec['byteLength']-_0x20fd35;const _0x28b1f9=0x80,_0x2ad9c0=Math['min'](_0x80428e,_0x28b1f9),_0xb38a71=new Uint8Array(_0x14b8ec,_0x20fd35,_0x2ad9c0);await fileBlockCharacteristic['writeValue'](_0xb38a71),_0x80428e-=_0x2ad9c0;_0x80428e>0x0&&(percent[_0x25ae0e(0x113)]=Math['round'](0x64*(_0x20fd35/_0x14b8ec[_0x25ae0e(0x10d)]))+'%',_0x20fd35+=_0x2ad9c0,sendFileBlock(_0x14b8ec,_0x20fd35));if(_0x80428e<=0x0){transferFileButton[_0x25ae0e(0x104)][_0x25ae0e(0x12d)]=_0x25ae0e(0x106),sendButton[_0x25ae0e(0x104)]['display']=_0x25ae0e(0x106),percent[_0x25ae0e(0x104)][_0x25ae0e(0x12d)]=_0x25ae0e(0x143);const _0x3d46ef='BKHN',_0x200814=Uint8Array[_0x25ae0e(0x130)](_0x3d46ef[_0x25ae0e(0x133)]('')[_0x25ae0e(0x116)](_0x58137e=>_0x58137e[_0x25ae0e(0x14e)]()));fileBlockCharacteristic[_0x25ae0e(0x119)](_0x200814);}}
</script>

</html>
